(function(n,t,i,r){"use strict";function u(n){return n&&n.match(/^#/)?n.substring(1):n||""}var f="onselectstart"in i.createElement("div");n.widget("moogle.contextmenu",{version:"1.3.0-1",options:{delegate:null,hide:{effect:"fadeOut",duration:"fast"},ignoreParentSelect:!0,menu:null,position:null,preventSelect:!1,show:{effect:"slideDown",duration:"fast"},taphold:!1,beforeOpen:n.noop,blur:n.noop,close:n.noop,create:n.noop,createMenu:n.noop,focus:n.noop,open:n.noop,select:n.noop},_create:function(){var r,u,e,t=this.options;if(this.$headStyle=null,this.$menu=null,this.menuIsTemp=!1,this.currentTarget=null,t.preventSelect){e=(n(this.element).is(i)?n("body"):this.element).uniqueId().attr("id");r="#"+e+" "+t.delegate+" { -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }";this.$headStyle=n("<style class='moogle-contextmenu-style' />").prop("type","text/css").appendTo("head");try{this.$headStyle.html(r)}catch(o){this.$headStyle[0].styleSheet.cssText=r}f&&this.element.delegate(t.delegate,"selectstart"+this.eventNamespace,function(n){n.preventDefault()})}this._createUiMenu(t.menu);u="contextmenu"+this.eventNamespace;t.taphold&&(u+=" taphold"+this.eventNamespace);this.element.delegate(t.delegate,u,n.proxy(this._openMenu,this))},_destroy:function(){this.element.undelegate(this.eventNamespace);this._createUiMenu(null);this.$headStyle&&(this.$headStyle.remove(),this.$headStyle=null)},_createUiMenu:function(t){if(this.isOpen()&&this._closeMenu(!0),this.menuIsTemp?this.$menu.remove():this.$menu&&this.$menu.menu("destroy").hide(),this.$menu=null,this.menuIsTemp=!1,t)n.isArray(t)?(this.$menu=n.moogle.contextmenu.createMenuMarkup(t),this.menuIsTemp=!0):this.$menu=typeof t=="string"?n(t):t;else return;this.$menu.hide().menu({blur:n.proxy(this.options.blur,this),create:n.proxy(this.options.createMenu,this),focus:n.proxy(this.options.focus,this),select:n.proxy(function(t,i){var r,o=i.item.has(">a[aria-haspopup='true']").length>0,f=i.item.find(">a"),e=f.data("actionHandler");i.cmd=u(f.attr("href"));i.target=n(this.currentTarget);o&&this.options.ignoreParentSelect||(r=this._trigger.call(this,"select",t,i),e&&(r=e.call(this,t,i)),r!==!1&&this._closeMenu.call(this),t.preventDefault())},this)})},_openMenu:function(t){var o=this.options,u=o.position,f=this,e={menu:this.$menu,target:n(t.target),extraData:t.extraData};if(this.currentTarget=t.target,t.preventDefault(),this._trigger("beforeOpen",t,e)===!1)return this.currentTarget=null,!1;e.menu=this.$menu;n(i).bind("keydown"+this.eventNamespace,function(t){t.which===n.ui.keyCode.ESCAPE&&f._closeMenu()}).bind("mousedown"+this.eventNamespace+" touchstart"+this.eventNamespace,function(t){n(t.target).closest(".ui-menu-item").length||f._closeMenu()});n.isFunction(u)&&(u=u(t,e));u=n.extend({my:"left top",at:"left bottom",of:t.pageX===r?t.target:t,collision:"fit"},u);this.$menu.show().css({position:"absolute",left:0,top:0}).position(u).hide();this._show(this.$menu,this.options.show,function(){f._trigger.call(f,"open",t,e)})},_closeMenu:function(t){var r=this,u=t?!1:this.options.hide;n(i).unbind("mousedown"+this.eventNamespace).unbind("touchstart"+this.eventNamespace).unbind("keydown"+this.eventNamespace);r.currentTarget=null;this._hide(this.$menu,u,function(){r._trigger("close")})},_setOption:function(t,i){switch(t){case"menu":this.replaceMenu(i)}n.Widget.prototype._setOption.apply(this,arguments)},_getMenuEntry:function(n,t){var i=this.$menu.find("li a[href=#"+u(n)+"]");return t?i.closest("li"):i},close:function(){this.isOpen()&&this._closeMenu()},enableEntry:function(n,t){this._getMenuEntry(n,!0).toggleClass("ui-state-disabled",t===!1)},getMenu:function(){return this.$menu},isOpen:function(){return!!this.$menu&&!!this.currentTarget},open:function(n,t){t=t||{};var i=jQuery.Event("contextmenu",{target:n.get(0),extraData:t});return this.element.trigger(i)},replaceMenu:function(n){this._createUiMenu(n)},setEntry:function(t,i){var u,r=this._getMenuEntry(t,!1);typeof i=="string"?r.children("span").length?r.contents().filter(function(){return this.nodeType===3}).first().replaceWith(i):r.text(i):(u=r.closest("li").empty(),i.cmd=i.cmd||t,n.moogle.contextmenu.createEntryMarkup(i,u))},showEntry:function(n,t){this._getMenuEntry(n,!0).toggle(t!==!1)}});n.extend(n.moogle.contextmenu,{createEntryMarkup:function(t,i){var r=null;return/[^\-\u2014\u2013\s]/.test(t.title)?(r=n("<a/>",{text:""+t.title,href:"#"+u(t.cmd)}).appendTo(i),n.isFunction(t.action)&&r.data("actionHandler",t.action),t.uiIcon&&r.append(n("<span class='ui-icon' />").addClass(t.uiIcon)),t.disabled&&i.addClass("ui-state-disabled"),n.isPlainObject(t.data)&&r.data(t.data)):i.text(t.title),r},createMenuMarkup:function(t,i){var r,u,e,f;for(i==null&&(i=n("<ul class='ui-helper-hidden' />").appendTo("body")),r=0;r<t.length;r++)u=t[r],f=n("<li/>").appendTo(i),n.moogle.contextmenu.createEntryMarkup(u,f),n.isArray(u.children)&&(e=n("<ul/>").appendTo(f),n.moogle.contextmenu.createMenuMarkup(u.children,e));return i}})})(jQuery,window,document);
/*
//# sourceMappingURL=jquery.ui-contextmenu.min.js.map
*/